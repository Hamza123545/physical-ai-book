if(void 0===__webpack_require__)var __webpack_require__={};(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[4044],{7809:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>s,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"chapter-05/lesson-06-nav2-architecture","title":"Lesson 5.6: Nav2 - Path Planning Framework","description":"Master Nav2, the ROS 2 navigation framework for robot path planning and execution","source":"@site/i18n/ur/docusaurus-plugin-content-docs/current/chapter-05/lesson-06-nav2-architecture.md","sourceDirName":"chapter-05","slug":"/chapter-05/lesson-06-nav2-architecture","permalink":"/physical-ai-book/ur/docs/chapter-05/lesson-06-nav2-architecture","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"nav2","permalink":"/physical-ai-book/ur/docs/tags/nav-2"},{"inline":true,"label":"navigation","permalink":"/physical-ai-book/ur/docs/tags/navigation"},{"inline":true,"label":"path-planning","permalink":"/physical-ai-book/ur/docs/tags/path-planning"},{"inline":true,"label":"ros2","permalink":"/physical-ai-book/ur/docs/tags/ros-2"},{"inline":true,"label":"localization","permalink":"/physical-ai-book/ur/docs/tags/localization"}],"version":"current","frontMatter":{"title":"Lesson 5.6: Nav2 - Path Planning Framework","description":"Master Nav2, the ROS 2 navigation framework for robot path planning and execution","chapter":5,"lesson":6,"estimated_time":70,"cefr_level":"B2","blooms_level":"Apply","digcomp_level":6,"generated_by":"claude-sonnet-4-5-20250929","source_spec":"specs/002-physical-ai-textbook/spec.md","created":"2025-11-29","last_modified":"2025-11-29","git_author":"hswat","workflow":"/sp.implement","version":"1.0","prerequisites":["chapter-02-index","chapter-05-lesson-01"],"has_interactive_python":true,"interactive_python_count":4,"has_try_with_ai":true,"try_with_ai_count":2,"tags":["nav2","navigation","path-planning","ros2","localization"]},"sidebar":"tutorialSidebar","previous":{"title":"Lesson 5.5: Model Predictive Control","permalink":"/physical-ai-book/ur/docs/chapter-05/lesson-05-mpc"},"next":{"title":"Lesson 5.7: Nav2 for Bipedal Humanoid Path Planning","permalink":"/physical-ai-book/ur/docs/chapter-05/lesson-07-nav2-humanoids"}}');var t=i(4848),o=i(8453);const s={title:"Lesson 5.6: Nav2 - Path Planning Framework",description:"Master Nav2, the ROS 2 navigation framework for robot path planning and execution",chapter:5,lesson:6,estimated_time:70,cefr_level:"B2",blooms_level:"Apply",digcomp_level:6,generated_by:"claude-sonnet-4-5-20250929",source_spec:"specs/002-physical-ai-textbook/spec.md",created:"2025-11-29",last_modified:"2025-11-29",git_author:"hswat",workflow:"/sp.implement",version:"1.0",prerequisites:["chapter-02-index","chapter-05-lesson-01"],has_interactive_python:!0,interactive_python_count:4,has_try_with_ai:!0,try_with_ai_count:2,tags:["nav2","navigation","path-planning","ros2","localization"]},r="Lesson 5.6: Nav2 - Path Planning Framework",l={},c=[{value:"\ud83c\udfaf Learning Objectives",id:"-learning-objectives",level:2},{value:"\ud83d\udcda Prerequisites",id:"-prerequisites",level:2},{value:"Introduction",id:"introduction",level:2},{value:"1. What is Nav2?",id:"1-what-is-nav2",level:2},{value:"Core Components:",id:"core-components",level:3},{value:"Architecture:",id:"architecture",level:3},{value:"2. Nav2 Components",id:"2-nav2-components",level:2},{value:"Planner Server:",id:"planner-server",level:3},{value:"Controller Server:",id:"controller-server",level:3},{value:"Recovery Server:",id:"recovery-server",level:3},{value:"BT Navigator:",id:"bt-navigator",level:3},{value:"3. Costmap 2D",id:"3-costmap-2d",level:2},{value:"Costmap Layers:",id:"costmap-layers",level:3},{value:"Cost Values:",id:"cost-values",level:3},{value:"4. Setting Up Nav2",id:"4-setting-up-nav2",level:2},{value:"Installation:",id:"installation",level:3},{value:"Basic Configuration:",id:"basic-configuration",level:3},{value:"5. Exercises",id:"5-exercises",level:2},{value:"Exercise 5.6.1: Design Nav2 Configuration",id:"exercise-561-design-nav2-configuration",level:3},{value:"Exercise 5.6.2: Simulate Nav2 Action Client",id:"exercise-562-simulate-nav2-action-client",level:3},{value:"Exercise 5.6.3: Configure Costmap for Obstacle Avoidance",id:"exercise-563-configure-costmap-for-obstacle-avoidance",level:3},{value:"Exercise 5.6.4: Design Nav2 Integration Pipeline",id:"exercise-564-design-nav2-integration-pipeline",level:3},{value:"6. Try With AI",id:"6-try-with-ai",level:2},{value:"TryWithAI 5.6.1: Optimize Nav2 for Specific Robot",id:"trywithai-561-optimize-nav2-for-specific-robot",level:3},{value:"TryWithAI 5.6.2: Debug Nav2 Navigation Failures",id:"trywithai-562-debug-nav2-navigation-failures",level:3},{value:"Summary",id:"summary",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...n.components},{InteractivePython:i,LearningObjectives:a,Prerequisites:s,TryWithAI:r}=e;return i||u("InteractivePython",!0),a||u("LearningObjectives",!0),s||u("Prerequisites",!0),r||u("TryWithAI",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"lesson-56-nav2---path-planning-framework",children:"Lesson 5.6: Nav2 - Path Planning Framework"})}),"\n",(0,t.jsx)(e.h2,{id:"-learning-objectives",children:"\ud83c\udfaf Learning Objectives"}),"\n",(0,t.jsx)(a,{cefr_level:"B2",objectives:[{text:"Understand Nav2 architecture and core components for ROS 2 navigation",blooms_level:"Understand",assessment_method:"Quiz questions"},{text:"Configure Nav2 stack for robot navigation with localization and path planning",blooms_level:"Apply",assessment_method:"Interactive Python exercises"},{text:"Implement Nav2 action clients to command robot navigation",blooms_level:"Apply",assessment_method:"Interactive Python exercises"},{text:"Integrate Nav2 with robot sensors and actuators for complete navigation system",blooms_level:"Apply",assessment_method:"Interactive Python exercises"}]}),"\n",(0,t.jsx)(e.h2,{id:"-prerequisites",children:"\ud83d\udcda Prerequisites"}),"\n",(0,t.jsx)(s,{prerequisites:[{lessonId:"chapter-02-index",title:"Chapter 2: ROS 2 Fundamentals",link:"/docs/chapter-02/index"},{lessonId:"chapter-05-lesson-01",title:"Lesson 5.1: Path Planning Basics",link:"/docs/chapter-05/lesson-01-path-planning"}]}),"\n",(0,t.jsx)(e.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Nav2"})," (Navigation2) is the ROS 2 navigation framework that provides a complete solution for robot navigation, including localization, path planning, and obstacle avoidance. It's the successor to ROS 1's ",(0,t.jsx)(e.code,{children:"move_base"})," and is designed for ROS 2's distributed architecture."]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Key Features"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Modular Architecture"}),": Pluggable planners, controllers, and recovery behaviors"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Action-Based"}),": Uses ROS 2 actions for navigation goals"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Costmap-Based"}),": Dynamic obstacle avoidance using costmaps"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Localization Integration"}),": Works with AMCL, SLAM, or custom localization"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Recovery Behaviors"}),": Automatic recovery from navigation failures"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Time"}),": 70 minutes"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"1-what-is-nav2",children:"1. What is Nav2?"}),"\n",(0,t.jsx)(e.p,{children:"Nav2 is a behavior tree-based navigation framework that orchestrates multiple components:"}),"\n",(0,t.jsx)(e.h3,{id:"core-components",children:"Core Components:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Planner"}),": Computes global path from start to goal"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Controller"}),": Executes local path following with obstacle avoidance"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Recovery"}),": Handles navigation failures (rotate, clear costmap, etc.)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"BT Navigator"}),": Behavior tree orchestrator"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Costmap 2D"}),": Dynamic obstacle representation"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"architecture",children:"Architecture:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502     Nav2 Behavior Tree              \u2502\n\u2502     (BT Navigator)                  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  Planner  \u2502  Controller  \u2502 Recovery \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502     Costmap 2D (Obstacle Map)       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502     Localization (AMCL/SLAM)        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502     ROS 2 Topics & Actions          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"2-nav2-components",children:"2. Nav2 Components"}),"\n",(0,t.jsx)(e.h3,{id:"planner-server",children:"Planner Server:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Computes global path from current pose to goal"}),"\n",(0,t.jsx)(e.li,{children:"Pluggable planners: NavFn, Smac Planner, Theta*"}),"\n",(0,t.jsx)(e.li,{children:"Input: Start pose, goal pose, costmap"}),"\n",(0,t.jsx)(e.li,{children:"Output: Global path (sequence of waypoints)"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"controller-server",children:"Controller Server:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Executes local path following"}),"\n",(0,t.jsx)(e.li,{children:"Obstacle avoidance using local costmap"}),"\n",(0,t.jsx)(e.li,{children:"Pluggable controllers: DWB, TEB, Pure Pursuit"}),"\n",(0,t.jsx)(e.li,{children:"Input: Global path, current pose, costmap"}),"\n",(0,t.jsx)(e.li,{children:"Output: Velocity commands"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"recovery-server",children:"Recovery Server:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Handles navigation failures"}),"\n",(0,t.jsx)(e.li,{children:"Behaviors: Spin, Back Up, Clear Costmap"}),"\n",(0,t.jsx)(e.li,{children:"Triggered when controller fails"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"bt-navigator",children:"BT Navigator:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Behavior tree orchestrator"}),"\n",(0,t.jsx)(e.li,{children:"Coordinates planner, controller, recovery"}),"\n",(0,t.jsx)(e.li,{children:"Manages navigation state machine"}),"\n"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"3-costmap-2d",children:"3. Costmap 2D"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Costmap"})," represents obstacles and free space as a 2D grid."]}),"\n",(0,t.jsx)(e.h3,{id:"costmap-layers",children:"Costmap Layers:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Static Layer"}),": Static map (from SLAM)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Obstacle Layer"}),": Dynamic obstacles (from sensors)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Inflation Layer"}),": Safety margins around obstacles"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"cost-values",children:"Cost Values:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"0"}),": Free space"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"1-252"}),": Increasing cost (near obstacles)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"253"}),": Inscribed obstacle"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"254"}),": Lethal obstacle (collision)"]}),"\n"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"4-setting-up-nav2",children:"4. Setting Up Nav2"}),"\n",(0,t.jsx)(e.h3,{id:"installation",children:"Installation:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"# Install Nav2 (conceptual)\nsudo apt install ros-humble-navigation2\n"})}),"\n",(0,t.jsx)(e.h3,{id:"basic-configuration",children:"Basic Configuration:"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Launch Nav2"}),": Start Nav2 stack with configuration"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Provide Map"}),": Load static map (from SLAM)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Set Initial Pose"}),": Provide robot's starting location"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Send Goal"}),": Use Nav2 action to command navigation"]}),"\n"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"5-exercises",children:"5. Exercises"}),"\n",(0,t.jsx)(e.h3,{id:"exercise-561-design-nav2-configuration",children:"Exercise 5.6.1: Design Nav2 Configuration"}),"\n",(0,t.jsx)(e.p,{children:"Design a Nav2 configuration for a mobile robot."}),"\n",(0,t.jsx)(i,{id:"ex-5-6-1",title:"Nav2 Configuration Design",starterCode:'def design_nav2_config(robot_type="differential_drive"):\n  """\n  Designs Nav2 configuration for a robot.\n  """\n  config = {\n      "planner": {\n          "plugin": "nav2_smac_planner/SmacPlanner",\n          "tolerance": 0.25,  # meters\n          "max_iterations": 1000000\n      },\n      "controller": {\n          "plugin": "dwb_core::DWBLocalPlanner",\n          "max_vel_x": 0.5,  # m/s\n          "max_vel_theta": 1.0,  # rad/s\n          "acc_lim_x": 2.5,  # m/s\xb2\n          "acc_lim_theta": 3.2  # rad/s\xb2\n      },\n      "costmap": {\n          "global_frame": "map",\n          "robot_base_frame": "base_link",\n          "update_frequency": 1.0,  # Hz\n          "publish_frequency": 1.0,  # Hz\n          "resolution": 0.05,  # meters per pixel\n          "inflation_radius": 0.55  # meters\n      },\n      "recovery": {\n          "behaviors": ["spin", "back_up", "wait"],\n          "spin_angle": 1.57,  # radians (90 degrees)\n          "back_up_distance": 0.15  # meters\n      }\n  }\n  \n  # Adjust for robot type\n  if robot_type == "bipedal_humanoid":\n      config["controller"]["max_vel_x"] = 0.3  # Slower for humanoids\n      config["controller"]["max_vel_theta"] = 0.5\n      config["costmap"]["inflation_radius"] = 0.8  # Larger safety margin\n  \n  return config\n\n# Test configurations\nprint("Differential Drive Robot Configuration:")\ndd_config = design_nav2_config("differential_drive")\nprint(f"  Max velocity: {dd_config[\'controller\'][\'max_vel_x\']} m/s")\nprint(f"  Inflation radius: {dd_config[\'costmap\'][\'inflation_radius\']} m")\n\nprint("\nBipedal Humanoid Configuration:")\nhumanoid_config = design_nav2_config("bipedal_humanoid")\nprint(f"  Max velocity: {humanoid_config[\'controller\'][\'max_vel_x\']} m/s")\nprint(f"  Inflation radius: {humanoid_config[\'costmap\'][\'inflation_radius\']} m")\n',hints:["Consider robot-specific constraints when configuring Nav2.","Humanoid robots need more conservative parameters due to balance constraints."]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h3,{id:"exercise-562-simulate-nav2-action-client",children:"Exercise 5.6.2: Simulate Nav2 Action Client"}),"\n",(0,t.jsx)(e.p,{children:"Simulate sending navigation goals to Nav2 using ROS 2 actions."}),"\n",(0,t.jsx)(i,{id:"ex-5-6-2",title:"Nav2 Action Client Simulation",starterCode:'class Nav2ActionClient:\n  """\n  Simulates Nav2 action client for sending navigation goals.\n  """\n  def __init__(self):\n      self.action_name = "/navigate_to_pose"\n      print(f"Nav2 Action Client initialized: {self.action_name}")\n  \n  def send_goal(self, x, y, theta):\n      """\n      Sends navigation goal to Nav2.\n      In real ROS 2, this would use NavigateToPose action.\n      """\n      goal = {\n          "pose": {\n              "position": {"x": x, "y": y, "z": 0.0},\n              "orientation": {"z": theta, "w": 1.0}  # Simplified\n          }\n      }\n      \n      print(f"Sending navigation goal: x={x:.2f}, y={y:.2f}, theta={theta:.2f}")\n      print("Goal sent. Waiting for result...")\n      \n      # Simulate navigation result\n      result = {\n          "status": "SUCCEEDED",\n          "total_elapsed_time": 15.3  # seconds\n      }\n      \n      return goal, result\n  \n  def cancel_goal(self):\n      """Cancels current navigation goal."""\n      print("Navigation goal cancelled.")\n      return True\n\n# Test\nclient = Nav2ActionClient()\n\n# Send goal to position (2.0, 3.0) with orientation 0.0\ngoal, result = client.send_goal(2.0, 3.0, 0.0)\nprint(f"\nResult: {result[\'status\']}")\nprint(f"Time taken: {result[\'total_elapsed_time\']} seconds")\n',hints:["Nav2 uses ROS 2 actions for navigation goals, allowing for feedback and cancellation.","In real systems, you would subscribe to feedback topics to monitor progress."]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h3,{id:"exercise-563-configure-costmap-for-obstacle-avoidance",children:"Exercise 5.6.3: Configure Costmap for Obstacle Avoidance"}),"\n",(0,t.jsx)(e.p,{children:"Design costmap configuration for effective obstacle avoidance."}),"\n",(0,t.jsx)(i,{id:"ex-5-6-3",title:"Costmap Configuration",starterCode:'def configure_costmap(robot_radius=0.3, safety_margin=0.2):\n  """\n  Configures costmap parameters for obstacle avoidance.\n  """\n  costmap_config = {\n      "global_costmap": {\n          "plugin": "nav2_costmap_2d::Nav2Costmap2D",\n          "global_frame": "map",\n          "robot_base_frame": "base_link",\n          "update_frequency": 1.0,\n          "publish_frequency": 1.0,\n          "resolution": 0.05,  # 5 cm per pixel\n          "width": 10.0,  # meters\n          "height": 10.0,  # meters\n          "inflation_radius": robot_radius + safety_margin\n      },\n      "local_costmap": {\n          "plugin": "nav2_costmap_2d::Nav2Costmap2D",\n          "global_frame": "odom",\n          "robot_base_frame": "base_link",\n          "update_frequency": 5.0,  # Higher frequency for local\n          "publish_frequency": 2.0,\n          "resolution": 0.05,\n          "width": 3.0,  # Smaller for local\n          "height": 3.0,\n          "inflation_radius": robot_radius + safety_margin\n      },\n      "obstacle_layer": {\n          "observation_sources": "scan",\n          "scan": {\n              "topic": "/scan",\n              "data_type": "LaserScan",\n              "clearing": True,\n              "marking": True\n          }\n      }\n  }\n  \n  return costmap_config\n\n# Test\nconfig = configure_costmap(robot_radius=0.3, safety_margin=0.2)\nprint("Costmap Configuration:")\nprint(f"\nGlobal Costmap:")\nprint(f"  Resolution: {config[\'global_costmap\'][\'resolution\']} m/pixel")\nprint(f"  Size: {config[\'global_costmap\'][\'width\']} x {config[\'global_costmap\'][\'height\']} m")\nprint(f"  Inflation radius: {config[\'global_costmap\'][\'inflation_radius\']} m")\n\nprint(f"\nLocal Costmap:")\nprint(f"  Resolution: {config[\'local_costmap\'][\'resolution\']} m/pixel")\nprint(f"  Size: {config[\'local_costmap\'][\'width\']} x {config[\'local_costmap\'][\'height\']} m")\nprint(f"  Update frequency: {config[\'local_costmap\'][\'update_frequency\']} Hz")\n',hints:["Global costmap is for long-term planning, local costmap is for immediate obstacle avoidance.","Inflation radius should include robot radius plus safety margin."]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h3,{id:"exercise-564-design-nav2-integration-pipeline",children:"Exercise 5.6.4: Design Nav2 Integration Pipeline"}),"\n",(0,t.jsx)(e.p,{children:"Design a complete integration pipeline for Nav2 with robot sensors and actuators."}),"\n",(0,t.jsx)(i,{id:"ex-5-6-4",title:"Nav2 Integration Pipeline",starterCode:'def design_nav2_integration():\n  """\n  Designs integration pipeline for Nav2 with robot system.\n  """\n  integration = {\n      "localization": {\n          "source": "amcl",  # or "slam_toolbox"\n          "map_topic": "/map",\n          "initial_pose_topic": "/initialpose",\n          "amcl_pose_topic": "/amcl_pose"\n      },\n      "sensors": {\n          "laser_scan": {\n              "topic": "/scan",\n              "frame": "laser_frame",\n              "type": "LaserScan"\n          },\n          "odometry": {\n              "topic": "/odom",\n              "frame": "odom",\n              "type": "Odometry"\n          }\n      },\n      "nav2_components": {\n          "bt_navigator": "/navigate_to_pose",\n          "planner_server": "/plan",\n          "controller_server": "/cmd_vel",\n          "recovery_server": "/recoveries"\n      },\n      "actuators": {\n          "cmd_vel": {\n              "topic": "/cmd_vel",\n              "type": "Twist",\n              "subscriber": "robot_base_controller"\n          }\n      },\n      "data_flow": [\n          "1. Localization provides robot pose",\n          "2. Sensors provide obstacle data to costmap",\n          "3. User sends navigation goal via Nav2 action",\n          "4. Planner computes global path",\n          "5. Controller generates velocity commands",\n          "6. Commands sent to robot actuators",\n          "7. Recovery behaviors handle failures"\n      ]\n  }\n  \n  return integration\n\n# Display integration\nintegration = design_nav2_integration()\nprint("Nav2 Integration Pipeline:")\nprint("\n1. Localization:")\nfor key, value in integration["localization"].items():\n  print(f"   - {key}: {value}")\n\nprint("\n2. Sensors:")\nfor sensor, config in integration["sensors"].items():\n  print(f"   - {sensor}: {config[\'topic\']} ({config[\'type\']})")\n\nprint("\n3. Nav2 Components:")\nfor component, topic in integration["nav2_components"].items():\n  print(f"   - {component}: {topic}")\n\nprint("\n4. Actuators:")\nfor actuator, config in integration["actuators"].items():\n  print(f"   - {actuator}: {config[\'topic\']} ({config[\'type\']})")\n\nprint("\n5. Data Flow:")\nfor step in integration["data_flow"]:\n  print(f"   {step}")\n',hints:["Nav2 integrates multiple components: localization, sensors, planning, control, and actuation.","Consider the data flow from goal to execution."]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"6-try-with-ai",children:"6. Try With AI"}),"\n",(0,t.jsx)(e.h3,{id:"trywithai-561-optimize-nav2-for-specific-robot",children:"TryWithAI 5.6.1: Optimize Nav2 for Specific Robot"}),"\n",(0,t.jsx)(r,{id:"tryai-5-6-1",title:"Optimize Nav2 Configuration for Your Robot",role:"Copilot",scenario:"You need to configure Nav2 for a specific robot with unique constraints (e.g., slow acceleration, large footprint, or specific sensor configuration).",yourTask:"List your robot's constraints (size, speed, sensors) and suggest Nav2 configuration parameters (planner, controller, costmap settings) that would work well.",aiPromptTemplate:"I'm configuring Nav2 for a robot with these constraints: [paste your constraints]. Here are my suggested Nav2 parameters: [paste your suggestions]. Can you help me refine these parameters, identify potential issues, and suggest optimal values for planner, controller, and costmap settings?",successCriteria:["You identified at least 5 Nav2 configuration parameters.","You understand how robot constraints affect Nav2 settings.","You can explain the trade-offs between different parameter choices."],reflectionQuestions:["How would you test if your Nav2 configuration is optimal?","What metrics would you use to evaluate navigation performance?","How would you handle navigation failures in your configuration?"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h3,{id:"trywithai-562-debug-nav2-navigation-failures",children:"TryWithAI 5.6.2: Debug Nav2 Navigation Failures"}),"\n",(0,t.jsx)(r,{id:"tryai-5-6-2",title:"Debug Nav2 Navigation Failures",role:"Evaluator",scenario:"Your robot using Nav2 frequently fails to reach goals, gets stuck, or takes inefficient paths. You need to diagnose the issues.",yourTask:"List 3-5 potential causes for Nav2 navigation failures and suggest diagnostic steps and solutions for each.",aiPromptTemplate:"My robot using Nav2 is experiencing navigation failures: [describe failures]. Here are my hypotheses: [paste your list]. Can you help me prioritize which issues are most likely, suggest specific diagnostic steps (e.g., checking costmap, planner output, controller behavior), and recommend fixes for each identified problem?",successCriteria:["You identified at least 4 potential causes of navigation failures.","You suggested specific diagnostic steps for each issue.","You can explain how to fix common Nav2 problems."],reflectionQuestions:["How would you systematically debug Nav2 navigation issues?","What ROS 2 topics would you monitor to diagnose problems?","How would you validate that your fixes actually work?"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Key Takeaways"}),":"]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Nav2"})," is the ROS 2 navigation framework providing complete navigation solution."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Modular Architecture"})," with pluggable planners, controllers, and recovery behaviors."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Costmap 2D"})," represents obstacles and free space for path planning and obstacle avoidance."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Action-Based"})," interface allows for goal management, feedback, and cancellation."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Integration"})," requires localization, sensors, and actuators working together."]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"What's Next"}),": ",(0,t.jsx)(e.a,{href:"/physical-ai-book/ur/docs/chapter-05/lesson-07-nav2-humanoids",children:"Lesson 5.7: Nav2 for Bipedal Humanoids"})," will explore how to adapt Nav2 specifically for bipedal humanoid robots with balance constraints."]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Estimated completion time"}),": 70 minutes | ",(0,t.jsx)(e.strong,{children:"Prerequisites"}),": Chapter 2, Lesson 5.1 | ",(0,t.jsx)(e.strong,{children:"Difficulty"}),": B2 (Advanced)"]})]})}function p(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}function u(n,e){throw new Error("Expected "+(e?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453:(n,e,i)=>{i.d(e,{R:()=>s,x:()=>r});var a=i(6540);const t={},o=a.createContext(t);function s(n){const e=a.useContext(o);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:s(n.components),a.createElement(o.Provider,{value:e},n.children)}}}]);