if(void 0===__webpack_require__)var __webpack_require__={};(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[9928],{2960:(s,e,n)=>{n.r(e),n.d(e,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>t,metadata:()=>a,toc:()=>m});const a=JSON.parse('{"id":"chapter-06/lesson-04","title":"Lesson 6.4: Compliant Control","description":"Impedance control, force regulation, collision safety","source":"@site/i18n/ur/docusaurus-plugin-content-docs/current/chapter-06/lesson-04.md","sourceDirName":"chapter-06","slug":"/chapter-06/lesson-04","permalink":"/physical-ai-book/ur/docs/chapter-06/lesson-04","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"manipulation","permalink":"/physical-ai-book/ur/docs/tags/manipulation"},{"inline":true,"label":"grasping","permalink":"/physical-ai-book/ur/docs/tags/grasping"},{"inline":true,"label":"compliant-control","permalink":"/physical-ai-book/ur/docs/tags/compliant-control"},{"inline":true,"label":"impedance","permalink":"/physical-ai-book/ur/docs/tags/impedance"}],"version":"current","frontMatter":{"title":"Lesson 6.4: Compliant Control","description":"Impedance control, force regulation, collision safety","chapter":6,"lesson":4,"estimated_time":60,"cefr_level":"B2","blooms_level":"Apply","digcomp_level":5,"generated_by":"claude-sonnet-4-5-20250929","source_spec":"specs/002-physical-ai-textbook/spec.md","created":"2025-11-29","last_modified":"2025-11-29","git_author":"hswat","workflow":"/sp.implement","version":"1.0","prerequisites":["chapter-05-lesson-04","chapter-06-lesson-03"],"has_interactive_python":false,"interactive_python_count":0,"has_try_with_ai":true,"try_with_ai_count":2,"tags":["manipulation","grasping","compliant-control","impedance"]},"sidebar":"tutorialSidebar","previous":{"title":"Lesson 6.3: Whole-Body Motion Planning","permalink":"/physical-ai-book/ur/docs/chapter-06/lesson-03"},"next":{"title":"Lesson 6.5: Human-Robot Interaction","permalink":"/physical-ai-book/ur/docs/chapter-06/lesson-05"}}');var i=n(4848),l=n(8453);const t={title:"Lesson 6.4: Compliant Control",description:"Impedance control, force regulation, collision safety",chapter:6,lesson:4,estimated_time:60,cefr_level:"B2",blooms_level:"Apply",digcomp_level:5,generated_by:"claude-sonnet-4-5-20250929",source_spec:"specs/002-physical-ai-textbook/spec.md",created:"2025-11-29",last_modified:"2025-11-29",git_author:"hswat",workflow:"/sp.implement",version:"1.0",prerequisites:["chapter-05-lesson-04","chapter-06-lesson-03"],has_interactive_python:!1,interactive_python_count:0,has_try_with_ai:!0,try_with_ai_count:2,tags:["manipulation","grasping","compliant-control","impedance"]},r="Lesson 6.4: Manipulation and Grasping",c={},m=[{value:"Introduction",id:"introduction",level:2},{value:"1. Impedance Control",id:"1-impedance-control",level:2},{value:"2. Admittance Control",id:"2-admittance-control",level:2},{value:"3. Force Control",id:"3-force-control",level:2},{value:"Interactive Exercises",id:"interactive-exercises",level:2},{value:"Exercise 6.4.1: 1D Impedance Control Simulation",id:"exercise-641-1d-impedance-control-simulation",level:3},{value:"Exercise 6.4.2: Collision Detection and Response",id:"exercise-642-collision-detection-and-response",level:3},{value:"Exercise 6.4.3: Force Control (Contact Task)",id:"exercise-643-force-control-contact-task",level:3},{value:"Exercise 6.4.4: Variable Stiffness Control",id:"exercise-644-variable-stiffness-control",level:3},{value:"TryWithAI Exercises",id:"trywithai-exercises",level:2},{value:"TryWithAI 6.4.1: Adaptive Impedance from Force Feedback",id:"trywithai-641-adaptive-impedance-from-force-feedback",level:3},{value:"TryWithAI 6.4.2: Hybrid Position-Force Control for Assembly",id:"trywithai-642-hybrid-position-force-control-for-assembly",level:3},{value:"Summary",id:"summary",level:2}];function o(s){const e={a:"a",annotation:"annotation",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",math:"math",mi:"mi",mn:"mn",mo:"mo",mover:"mover",mrow:"mrow",msqrt:"msqrt",msub:"msub",mtext:"mtext",p:"p",path:"path",pre:"pre",semantics:"semantics",span:"span",strong:"strong",svg:"svg",ul:"ul",...(0,l.R)(),...s.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"lesson-64-manipulation-and-grasping",children:"Lesson 6.4: Manipulation and Grasping"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Prerequisites"}),": ",(0,i.jsx)(e.a,{href:"/physical-ai-book/ur/docs/chapter-05/",children:"Chapter 5: Dynamics and Control"}),", ",(0,i.jsx)(e.a,{href:"/physical-ai-book/ur/docs/chapter-06/lesson-03",children:"Lesson 6.3: Balance Control"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsx)(e.p,{children:"Humanoid robots must physically interact with humans and environments safely. Rigid position control can cause damage during unexpected contact. Compliant control regulates interaction forces while maintaining position accuracy, enabling safe handshakes, collaborative lifting, and collision response. This lesson covers impedance control, admittance control, and force regulation strategies."}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Learning Objectives"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Understand impedance vs. admittance control paradigms"}),"\n",(0,i.jsx)(e.li,{children:"Implement virtual mass-spring-damper systems"}),"\n",(0,i.jsx)(e.li,{children:"Design force controllers for contact tasks"}),"\n",(0,i.jsx)(e.li,{children:"Apply collision detection and reaction strategies"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"1-impedance-control",children:"1. Impedance Control"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Impedance control"})," regulates the dynamic relationship between position error and force:"]}),"\n",(0,i.jsx)(e.span,{className:"katex-display",children:(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mi,{mathvariant:"bold",children:"F"}),(0,i.jsx)(e.mo,{children:"="}),(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{mathvariant:"bold",children:"M"}),(0,i.jsx)(e.mi,{children:"d"})]}),(0,i.jsx)(e.mo,{stretchy:"false",children:"("}),(0,i.jsxs)(e.msub,{children:[(0,i.jsxs)(e.mover,{accent:"true",children:[(0,i.jsx)(e.mi,{mathvariant:"bold",children:"x"}),(0,i.jsx)(e.mo,{children:"\xa8"})]}),(0,i.jsx)(e.mi,{children:"d"})]}),(0,i.jsx)(e.mo,{children:"\u2212"}),(0,i.jsxs)(e.mover,{accent:"true",children:[(0,i.jsx)(e.mi,{mathvariant:"bold",children:"x"}),(0,i.jsx)(e.mo,{children:"\xa8"})]}),(0,i.jsx)(e.mo,{stretchy:"false",children:")"}),(0,i.jsx)(e.mo,{children:"+"}),(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{mathvariant:"bold",children:"D"}),(0,i.jsx)(e.mi,{children:"d"})]}),(0,i.jsx)(e.mo,{stretchy:"false",children:"("}),(0,i.jsxs)(e.msub,{children:[(0,i.jsxs)(e.mover,{accent:"true",children:[(0,i.jsx)(e.mi,{mathvariant:"bold",children:"x"}),(0,i.jsx)(e.mo,{children:"\u02d9"})]}),(0,i.jsx)(e.mi,{children:"d"})]}),(0,i.jsx)(e.mo,{children:"\u2212"}),(0,i.jsxs)(e.mover,{accent:"true",children:[(0,i.jsx)(e.mi,{mathvariant:"bold",children:"x"}),(0,i.jsx)(e.mo,{children:"\u02d9"})]}),(0,i.jsx)(e.mo,{stretchy:"false",children:")"}),(0,i.jsx)(e.mo,{children:"+"}),(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{mathvariant:"bold",children:"K"}),(0,i.jsx)(e.mi,{children:"d"})]}),(0,i.jsx)(e.mo,{stretchy:"false",children:"("}),(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{mathvariant:"bold",children:"x"}),(0,i.jsx)(e.mi,{children:"d"})]}),(0,i.jsx)(e.mo,{children:"\u2212"}),(0,i.jsx)(e.mi,{mathvariant:"bold",children:"x"}),(0,i.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\mathbf{F} = \\mathbf{M}_d (\\ddot{\\mathbf{x}}_d - \\ddot{\\mathbf{x}}) + \\mathbf{D}_d (\\dot{\\mathbf{x}}_d - \\dot{\\mathbf{x}}) + \\mathbf{K}_d (\\mathbf{x}_d - \\mathbf{x})"})]})})}),(0,i.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.6861em"}}),(0,i.jsx)(e.span,{className:"mord mathbf",children:"F"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,i.jsx)(e.span,{className:"mrel",children:"="}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathbf",children:"M"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsx)(e.span,{className:"mopen",children:"("}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord accent",children:(0,i.jsx)(e.span,{className:"vlist-t",children:(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsxs)(e.span,{className:"vlist",style:{height:"0.6813em"},children:[(0,i.jsxs)(e.span,{style:{top:"-3em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"mord mathbf",children:"x"})]}),(0,i.jsxs)(e.span,{style:{top:"-3.0134em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"accent-body",style:{left:"-0.2222em"},children:(0,i.jsx)(e.span,{className:"mord",children:"\xa8"})})]})]})})})}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"\u2212"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mord accent",children:(0,i.jsx)(e.span,{className:"vlist-t",children:(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsxs)(e.span,{className:"vlist",style:{height:"0.6813em"},children:[(0,i.jsxs)(e.span,{style:{top:"-3em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"mord mathbf",children:"x"})]}),(0,i.jsxs)(e.span,{style:{top:"-3.0134em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"accent-body",style:{left:"-0.2222em"},children:(0,i.jsx)(e.span,{className:"mord",children:"\xa8"})})]})]})})})}),(0,i.jsx)(e.span,{className:"mclose",children:")"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"+"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathbf",children:"D"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsx)(e.span,{className:"mopen",children:"("}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord accent",children:(0,i.jsx)(e.span,{className:"vlist-t",children:(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsxs)(e.span,{className:"vlist",style:{height:"0.6813em"},children:[(0,i.jsxs)(e.span,{style:{top:"-3em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"mord mathbf",children:"x"})]}),(0,i.jsxs)(e.span,{style:{top:"-3.0134em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"accent-body",style:{left:"-0.1111em"},children:(0,i.jsx)(e.span,{className:"mord",children:"\u02d9"})})]})]})})})}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"\u2212"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mord accent",children:(0,i.jsx)(e.span,{className:"vlist-t",children:(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsxs)(e.span,{className:"vlist",style:{height:"0.6813em"},children:[(0,i.jsxs)(e.span,{style:{top:"-3em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"mord mathbf",children:"x"})]}),(0,i.jsxs)(e.span,{style:{top:"-3.0134em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"accent-body",style:{left:"-0.1111em"},children:(0,i.jsx)(e.span,{className:"mord",children:"\u02d9"})})]})]})})})}),(0,i.jsx)(e.span,{className:"mclose",children:")"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"+"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathbf",children:"K"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsx)(e.span,{className:"mopen",children:"("}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathbf",children:"x"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"\u2212"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mord mathbf",children:"x"}),(0,i.jsx)(e.span,{className:"mclose",children:")"})]})]})]})}),"\n",(0,i.jsx)(e.p,{children:"Where:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsx)(e.mrow,{children:(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{mathvariant:"bold",children:"M"}),(0,i.jsx)(e.mi,{children:"d"})]})}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\mathbf{M}_d"})]})})}),(0,i.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.8361em",verticalAlign:"-0.15em"}}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathbf",children:"M"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]})]})})]}),": Desired inertia matrix (virtual mass)"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsx)(e.mrow,{children:(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{mathvariant:"bold",children:"D"}),(0,i.jsx)(e.mi,{children:"d"})]})}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\mathbf{D}_d"})]})})}),(0,i.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.8361em",verticalAlign:"-0.15em"}}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathbf",children:"D"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]})]})})]}),": Desired damping matrix"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsx)(e.mrow,{children:(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{mathvariant:"bold",children:"K"}),(0,i.jsx)(e.mi,{children:"d"})]})}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\mathbf{K}_d"})]})})}),(0,i.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.8361em",verticalAlign:"-0.15em"}}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathbf",children:"K"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]})]})})]}),": Desired stiffness matrix"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mi,{mathvariant:"bold",children:"x"}),(0,i.jsx)(e.mo,{separator:"true",children:","}),(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{mathvariant:"bold",children:"x"}),(0,i.jsx)(e.mi,{children:"d"})]})]}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\mathbf{x}, \\mathbf{x}_d"})]})})}),(0,i.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.6389em",verticalAlign:"-0.1944em"}}),(0,i.jsx)(e.span,{className:"mord mathbf",children:"x"}),(0,i.jsx)(e.span,{className:"mpunct",children:","}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathbf",children:"x"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]})]})})]}),": Actual and desired end-effector positions"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Physical Interpretation"}),": Robot behaves like a mass-spring-damper attached to the target position."]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Tuning Guidelines"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsxs)(e.strong,{children:["High stiffness ",(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsx)(e.mrow,{children:(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{children:"K"}),(0,i.jsx)(e.mi,{children:"d"})]})}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"K_d"})]})})}),(0,i.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"K"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0715em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]})]})})]})]}),": Accurate tracking, but rigid (low compliance)"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Low stiffness"}),": Compliant (safe), but poor tracking"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Critical damping"}),": ",(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsxs)(e.mrow,{children:[(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{children:"D"}),(0,i.jsx)(e.mi,{children:"d"})]}),(0,i.jsx)(e.mo,{children:"="}),(0,i.jsx)(e.mn,{children:"2"}),(0,i.jsx)(e.msqrt,{children:(0,i.jsxs)(e.mrow,{children:[(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{children:"M"}),(0,i.jsx)(e.mi,{children:"d"})]}),(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{children:"K"}),(0,i.jsx)(e.mi,{children:"d"})]})]})})]}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"D_d = 2\\sqrt{M_d K_d}"})]})})}),(0,i.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"D"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0278em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,i.jsx)(e.span,{className:"mrel",children:"="}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1.04em",verticalAlign:"-0.1883em"}}),(0,i.jsx)(e.span,{className:"mord",children:"2"}),(0,i.jsx)(e.span,{className:"mord sqrt",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsxs)(e.span,{className:"vlist",style:{height:"0.8517em"},children:[(0,i.jsxs)(e.span,{className:"svg-align",style:{top:"-3em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsxs)(e.span,{className:"mord",style:{paddingLeft:"0.833em"},children:[(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.109em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"K"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0715em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]})]})]}),(0,i.jsxs)(e.span,{style:{top:"-2.8117em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"hide-tail",style:{minWidth:"0.853em",height:"1.08em"},children:(0,i.jsx)(e.svg,{xmlns:"http://www.w3.org/2000/svg",width:"400em",height:"1.08em",viewBox:"0 0 400000 1080",preserveAspectRatio:"xMinYMin slice",children:(0,i.jsx)(e.path,{d:"M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z"})})})]})]}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.1883em"},children:(0,i.jsx)(e.span,{})})})]})})]})]})]})," (no oscillations)"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"2-admittance-control",children:"2. Admittance Control"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Admittance control"})," computes desired position from measured force:"]}),"\n",(0,i.jsx)(e.span,{className:"katex-display",children:(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsxs)(e.mrow,{children:[(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{mathvariant:"bold",children:"M"}),(0,i.jsx)(e.mi,{children:"d"})]}),(0,i.jsxs)(e.msub,{children:[(0,i.jsxs)(e.mover,{accent:"true",children:[(0,i.jsx)(e.mi,{mathvariant:"bold",children:"x"}),(0,i.jsx)(e.mo,{children:"\xa8"})]}),(0,i.jsx)(e.mi,{children:"d"})]}),(0,i.jsx)(e.mo,{children:"+"}),(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{mathvariant:"bold",children:"D"}),(0,i.jsx)(e.mi,{children:"d"})]}),(0,i.jsxs)(e.msub,{children:[(0,i.jsxs)(e.mover,{accent:"true",children:[(0,i.jsx)(e.mi,{mathvariant:"bold",children:"x"}),(0,i.jsx)(e.mo,{children:"\u02d9"})]}),(0,i.jsx)(e.mi,{children:"d"})]}),(0,i.jsx)(e.mo,{children:"+"}),(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{mathvariant:"bold",children:"K"}),(0,i.jsx)(e.mi,{children:"d"})]}),(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{mathvariant:"bold",children:"x"}),(0,i.jsx)(e.mi,{children:"d"})]}),(0,i.jsx)(e.mo,{children:"="}),(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{mathvariant:"bold",children:"F"}),(0,i.jsx)(e.mtext,{children:"ext"})]})]}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\mathbf{M}_d \\ddot{\\mathbf{x}}_d + \\mathbf{D}_d \\dot{\\mathbf{x}}_d + \\mathbf{K}_d \\mathbf{x}_d = \\mathbf{F}_{\\text{ext}}"})]})})}),(0,i.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.8361em",verticalAlign:"-0.15em"}}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathbf",children:"M"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord accent",children:(0,i.jsx)(e.span,{className:"vlist-t",children:(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsxs)(e.span,{className:"vlist",style:{height:"0.6813em"},children:[(0,i.jsxs)(e.span,{style:{top:"-3em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"mord mathbf",children:"x"})]}),(0,i.jsxs)(e.span,{style:{top:"-3.0134em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"accent-body",style:{left:"-0.2222em"},children:(0,i.jsx)(e.span,{className:"mord",children:"\xa8"})})]})]})})})}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"+"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.8361em",verticalAlign:"-0.15em"}}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathbf",children:"D"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord accent",children:(0,i.jsx)(e.span,{className:"vlist-t",children:(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsxs)(e.span,{className:"vlist",style:{height:"0.6813em"},children:[(0,i.jsxs)(e.span,{style:{top:"-3em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"mord mathbf",children:"x"})]}),(0,i.jsxs)(e.span,{style:{top:"-3.0134em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"accent-body",style:{left:"-0.1111em"},children:(0,i.jsx)(e.span,{className:"mord",children:"\u02d9"})})]})]})})})}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"+"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.8361em",verticalAlign:"-0.15em"}}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathbf",children:"K"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathbf",children:"x"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,i.jsx)(e.span,{className:"mrel",children:"="}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.8361em",verticalAlign:"-0.15em"}}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathbf",children:"F"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.2806em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mtight",children:(0,i.jsx)(e.span,{className:"mord text mtight",children:(0,i.jsx)(e.span,{className:"mord mtight",children:"ext"})})})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]})]})]})]})}),"\n",(0,i.jsxs)(e.p,{children:["Where ",(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsx)(e.mrow,{children:(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{mathvariant:"bold",children:"F"}),(0,i.jsx)(e.mtext,{children:"ext"})]})}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\mathbf{F}_{\\text{ext}}"})]})})}),(0,i.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.8361em",verticalAlign:"-0.15em"}}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathbf",children:"F"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.2806em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mtight",children:(0,i.jsx)(e.span,{className:"mord text mtight",children:(0,i.jsx)(e.span,{className:"mord mtight",children:"ext"})})})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]})]})})]})," is the external force (measured by force/torque sensor)."]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Difference from Impedance"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Impedance"}),": Position controlled, force is outcome"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Admittance"}),": Force controlled, position is outcome"]}),"\n",(0,i.jsx)(e.li,{children:"Impedance better for stiff robots; admittance for backdrivable robots"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"3-force-control",children:"3. Force Control"}),"\n",(0,i.jsx)(e.p,{children:"For tasks requiring specific contact forces (e.g., polishing, pushing button):"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Hybrid Position/Force Control"}),": Control position in some directions, force in others."]}),"\n",(0,i.jsx)(e.p,{children:"Example: Wiping surface (vertical)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsx)(e.mrow,{children:(0,i.jsx)(e.mi,{children:"x"})}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"x"})]})})}),(0,i.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"x"})]})})]}),", ",(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsx)(e.mrow,{children:(0,i.jsx)(e.mi,{children:"y"})}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"y"})]})})}),(0,i.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"})]})})]}),": Position control (trajectory)"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsx)(e.mrow,{children:(0,i.jsx)(e.mi,{children:"z"})}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"z"})]})})}),(0,i.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.04398em"},children:"z"})]})})]}),": Force control (constant normal force)"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"PI Force Controller"}),":"]}),"\n",(0,i.jsx)(e.span,{className:"katex-display",children:(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsxs)(e.mrow,{children:[(0,i.jsxs)(e.msub,{children:[(0,i.jsxs)(e.mover,{accent:"true",children:[(0,i.jsx)(e.mi,{children:"x"}),(0,i.jsx)(e.mo,{children:"\u02d9"})]}),(0,i.jsx)(e.mi,{children:"z"})]}),(0,i.jsx)(e.mo,{children:"="}),(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{children:"K"}),(0,i.jsx)(e.mi,{children:"p"})]}),(0,i.jsx)(e.mo,{stretchy:"false",children:"("}),(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{children:"F"}),(0,i.jsx)(e.mi,{children:"d"})]}),(0,i.jsx)(e.mo,{children:"\u2212"}),(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{children:"F"}),(0,i.jsx)(e.mi,{children:"z"})]}),(0,i.jsx)(e.mo,{stretchy:"false",children:")"}),(0,i.jsx)(e.mo,{children:"+"}),(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{children:"K"}),(0,i.jsx)(e.mi,{children:"i"})]}),(0,i.jsx)(e.mo,{children:"\u222b"}),(0,i.jsx)(e.mo,{stretchy:"false",children:"("}),(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{children:"F"}),(0,i.jsx)(e.mi,{children:"d"})]}),(0,i.jsx)(e.mo,{children:"\u2212"}),(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{children:"F"}),(0,i.jsx)(e.mi,{children:"z"})]}),(0,i.jsx)(e.mo,{stretchy:"false",children:")"}),(0,i.jsx)(e.mi,{children:"d"}),(0,i.jsx)(e.mi,{children:"t"})]}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\dot{x}_z = K_p (F_d - F_z) + K_i \\int (F_d - F_z) dt"})]})})}),(0,i.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.8179em",verticalAlign:"-0.15em"}}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord accent",children:(0,i.jsx)(e.span,{className:"vlist-t",children:(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsxs)(e.span,{className:"vlist",style:{height:"0.6679em"},children:[(0,i.jsxs)(e.span,{style:{top:"-3em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"x"})]}),(0,i.jsxs)(e.span,{style:{top:"-3em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"accent-body",style:{left:"-0.1111em"},children:(0,i.jsx)(e.span,{className:"mord",children:"\u02d9"})})]})]})})})}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.1514em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.04398em"},children:"z"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,i.jsx)(e.span,{className:"mrel",children:"="}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1.0361em",verticalAlign:"-0.2861em"}}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"K"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.1514em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0715em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"p"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.2861em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsx)(e.span,{className:"mopen",children:"("}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"F"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"\u2212"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"F"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.1514em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.04398em"},children:"z"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsx)(e.span,{className:"mclose",children:")"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"+"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"2.2222em",verticalAlign:"-0.8622em"}}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"K"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3117em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0715em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"i"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,i.jsx)(e.span,{className:"mop op-symbol large-op",style:{marginRight:"0.44445em",position:"relative",top:"-0.0011em"},children:"\u222b"}),(0,i.jsx)(e.span,{className:"mopen",children:"("}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"F"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"\u2212"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"F"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.1514em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.04398em"},children:"z"})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsx)(e.span,{className:"mclose",children:")"}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"d"}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"t"})]})]})]})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"interactive-exercises",children:"Interactive Exercises"}),"\n",(0,i.jsx)(e.h3,{id:"exercise-641-1d-impedance-control-simulation",children:"Exercise 6.4.1: 1D Impedance Control Simulation"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"\"\"\"Simulate impedance control for 1D point mass.\"\"\"\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom typing import Tuple\n\ndef impedance_control_1d(\n    x: float,\n    x_dot: float,\n    x_desired: float,\n    x_dot_desired: float,\n    M_d: float,\n    D_d: float,\n    K_d: float,\n    F_ext: float = 0.0\n) -> float:\n    \"\"\"\n    Compute control force using impedance control.\n\n    Args:\n        x: Current position (m)\n        x_dot: Current velocity (m/s)\n        x_desired: Desired position (m)\n        x_dot_desired: Desired velocity (m/s)\n        M_d: Desired mass (kg)\n        D_d: Desired damping (Ns/m)\n        K_d: Desired stiffness (N/m)\n        F_ext: External force (N)\n\n    Returns:\n        F_control: Control force (N)\n    \"\"\"\n    # Impedance law (assumes x_ddot_desired = 0 for simplicity)\n    F_control = (\n        -M_d * 0.0 +  # No desired acceleration\n        D_d * (x_dot_desired - x_dot) +\n        K_d * (x_desired - x) +\n        F_ext  # Feedforward external force compensation\n    )\n\n    return F_control\n\ndef simulate_impedance(\n    mass_robot: float,\n    stiffness: float,\n    damping: float,\n    desired_pos: float,\n    external_force: float,\n    duration: float = 5.0,\n    dt: float = 0.01\n) -> Tuple[np.ndarray, np.ndarray, np.ndarray]:\n    \"\"\"\n    Simulate 1D impedance control with optional external force.\n\n    Args:\n        mass_robot: Actual robot mass (kg)\n        stiffness: Desired stiffness K_d (N/m)\n        damping: Desired damping D_d (Ns/m)\n        desired_pos: Target position (m)\n        external_force: Constant external force (N)\n        duration: Simulation time (s)\n        dt: Time step (s)\n\n    Returns:\n        times: Time array\n        positions: Position history\n        forces: Control force history\n    \"\"\"\n    times = np.arange(0, duration, dt)\n    positions = np.zeros(len(times))\n    velocities = np.zeros(len(times))\n    forces = np.zeros(len(times))\n\n    # Initial state: at origin, zero velocity\n    x, x_dot = 0.0, 0.0\n\n    # Desired mass (for impedance)\n    M_d = mass_robot\n\n    for i, t in enumerate(times):\n        # Apply external force after t=2s\n        F_ext = external_force if t > 2.0 else 0.0\n\n        # Impedance control\n        F_control = impedance_control_1d(\n            x, x_dot, desired_pos, 0.0, M_d, damping, stiffness, F_ext=0.0\n        )\n\n        # Robot dynamics: m * x_ddot = F_control + F_ext\n        x_ddot = (F_control + F_ext) / mass_robot\n\n        # Integrate (Euler)\n        x_dot = x_dot + x_ddot * dt\n        x = x + x_dot * dt\n\n        positions[i] = x\n        velocities[i] = x_dot\n        forces[i] = F_control\n\n    return times, positions, forces\n\n# Test different stiffness values\nmass_robot = 5.0  # kg\ndesired_pos = 1.0  # m\nexternal_force = -10.0  # N (pushing back)\n\nstiffness_values = [50, 200, 1000]  # N/m\ncolors = ['blue', 'orange', 'red']\n\nfig, axes = plt.subplots(2, 1, figsize=(10, 8))\n\nfor K_d, color in zip(stiffness_values, colors):\n    D_d = 2 * np.sqrt(mass_robot * K_d)  # Critical damping\n\n    times, positions, forces = simulate_impedance(\n        mass_robot, K_d, D_d, desired_pos, external_force\n    )\n\n    # Position\n    axes[0].plot(times, positions, color=color, linewidth=2, label=f'K={K_d} N/m')\n\n    # Force\n    axes[1].plot(times, forces, color=color, linewidth=2, label=f'K={K_d} N/m')\n\n# Format\naxes[0].axhline(desired_pos, color='black', linestyle='--', alpha=0.5, label='Desired')\naxes[0].axvline(2.0, color='gray', linestyle=':', alpha=0.5, label='Force Applied')\naxes[0].set_ylabel('Position (m)')\naxes[0].set_title('Impedance Control: Position Response')\naxes[0].legend()\naxes[0].grid(True, alpha=0.3)\n\naxes[1].axvline(2.0, color='gray', linestyle=':', alpha=0.5)\naxes[1].set_xlabel('Time (s)')\naxes[1].set_ylabel('Control Force (N)')\naxes[1].set_title('Impedance Control: Control Force')\naxes[1].legend()\naxes[1].grid(True, alpha=0.3)\n\nplt.tight_layout()\nplt.show()\n\n# Analyze steady-state displacement\nfor K_d in stiffness_values:\n    displacement = external_force / K_d\n    print(f\"Stiffness {K_d} N/m: Steady-state displacement = {abs(displacement)*100:.2f} cm\")\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Expected Output"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Low stiffness (50 N/m): Large displacement under force (~20cm)"}),"\n",(0,i.jsx)(e.li,{children:"High stiffness (1000 N/m): Small displacement (~1cm)"}),"\n",(0,i.jsx)(e.li,{children:"All critically damped (no overshoot)"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"What You Learned"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Impedance control creates virtual spring between robot and target"}),"\n",(0,i.jsx)(e.li,{children:"Lower stiffness \u2192 more compliant (safer, but less accurate)"}),"\n",(0,i.jsxs)(e.li,{children:["External forces cause steady-state displacement ",(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mi,{mathvariant:"normal",children:"\u0394"}),(0,i.jsx)(e.mi,{children:"x"}),(0,i.jsx)(e.mo,{children:"="}),(0,i.jsx)(e.mi,{children:"F"}),(0,i.jsx)(e.mi,{mathvariant:"normal",children:"/"}),(0,i.jsx)(e.mi,{children:"K"})]}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\Delta x = F/K"})]})})}),(0,i.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,i.jsx)(e.span,{className:"mord",children:"\u0394"}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,i.jsx)(e.span,{className:"mrel",children:"="}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"F"}),(0,i.jsx)(e.span,{className:"mord",children:"/"}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"K"})]})]})]})]}),"\n",(0,i.jsx)(e.li,{children:"Critical damping eliminates oscillations"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"exercise-642-collision-detection-and-response",children:"Exercise 6.4.2: Collision Detection and Response"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"\"\"\"Detect collision from acceleration and trigger compliant response.\"\"\"\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom typing import Tuple\n\ndef detect_collision(\n    acceleration: float,\n    threshold: float = 5.0\n) -> bool:\n    \"\"\"\n    Detect collision from abnormal acceleration.\n\n    Args:\n        acceleration: Current acceleration (m/s\xb2)\n        threshold: Collision threshold (m/s\xb2)\n\n    Returns:\n        collision_detected: True if collision detected\n    \"\"\"\n    return abs(acceleration) > threshold\n\ndef simulate_collision_response(\n    collision_time: float = 2.0,\n    collision_force: float = 50.0,\n    duration: float = 5.0,\n    dt: float = 0.01\n) -> Tuple[np.ndarray, np.ndarray, np.ndarray, np.ndarray]:\n    \"\"\"\n    Simulate robot with collision detection and compliant response.\n\n    Args:\n        collision_time: Time of collision (s)\n        collision_force: Impact force (N)\n        duration: Simulation duration (s)\n        dt: Time step (s)\n\n    Returns:\n        times, positions, forces, mode (0=normal, 1=collision response)\n    \"\"\"\n    times = np.arange(0, duration, dt)\n    positions = np.zeros(len(times))\n    velocities = np.zeros(len(times))\n    forces = np.zeros(len(times))\n    modes = np.zeros(len(times))  # 0=normal, 1=compliant\n\n    # Robot parameters\n    mass = 5.0  # kg\n    desired_pos = 1.5  # m\n\n    # Normal mode: high stiffness\n    K_normal = 1000.0  # N/m\n    D_normal = 2 * np.sqrt(mass * K_normal)\n\n    # Collision response: low stiffness\n    K_compliant = 50.0  # N/m\n    D_compliant = 2 * np.sqrt(mass * K_compliant)\n\n    x, x_dot = 0.0, 0.0\n    collision_detected = False\n\n    for i, t in enumerate(times):\n        # Apply collision force\n        F_ext = collision_force if abs(t - collision_time) < 0.1 else 0.0\n\n        # Select impedance parameters\n        if collision_detected:\n            K_d, D_d = K_compliant, D_compliant\n            modes[i] = 1\n        else:\n            K_d, D_d = K_normal, D_normal\n            modes[i] = 0\n\n        # Impedance control\n        F_control = impedance_control_1d(x, x_dot, desired_pos, 0.0, mass, D_d, K_d)\n\n        # Dynamics\n        x_ddot = (F_control + F_ext) / mass\n\n        # Collision detection\n        if not collision_detected and detect_collision(x_ddot, threshold=5.0):\n            collision_detected = True\n            print(f\"Collision detected at t={t:.2f}s, acceleration={x_ddot:.1f} m/s\xb2\")\n\n        # Integrate\n        x_dot = x_dot + x_ddot * dt\n        x = x + x_dot * dt\n\n        positions[i] = x\n        forces[i] = F_control\n\n    return times, positions, forces, modes\n\n# Simulate collision scenario\ntimes, positions, forces, modes = simulate_collision_response(\n    collision_time=2.0,\n    collision_force=50.0\n)\n\n# Visualize\nfig, axes = plt.subplots(3, 1, figsize=(10, 10))\n\n# Position\naxes[0].plot(times, positions, 'b-', linewidth=2, label='Position')\naxes[0].axhline(1.5, color='black', linestyle='--', alpha=0.5, label='Target')\naxes[0].fill_between(times, 0, 2, where=(modes == 1), alpha=0.2,\n                      color='red', label='Compliant Mode')\naxes[0].set_ylabel('Position (m)')\naxes[0].set_title('Collision Response: Position')\naxes[0].legend()\naxes[0].grid(True, alpha=0.3)\n\n# Force\naxes[1].plot(times, forces, 'g-', linewidth=2, label='Control Force')\naxes[1].fill_between(times, -100, 100, where=(modes == 1), alpha=0.2, color='red')\naxes[1].set_ylabel('Force (N)')\naxes[1].set_title('Collision Response: Control Force')\naxes[1].legend()\naxes[1].grid(True, alpha=0.3)\n\n# Mode\naxes[2].fill_between(times, 0, 1, where=(modes == 0), alpha=0.5,\n                      color='green', label='Normal (Stiff)')\naxes[2].fill_between(times, 0, 1, where=(modes == 1), alpha=0.5,\n                      color='red', label='Collision Response (Compliant)')\naxes[2].set_xlabel('Time (s)')\naxes[2].set_ylabel('Control Mode')\naxes[2].set_title('Control Mode State')\naxes[2].set_ylim(-0.1, 1.1)\naxes[2].legend()\naxes[2].grid(True, alpha=0.3)\n\nplt.tight_layout()\nplt.show()\n\nprint(f\"Max position displacement: {positions.max():.3f} m\")\nprint(f\"Compliant mode duration: {np.sum(modes) * 0.01:.2f} s\")\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Expected Output"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"High acceleration spike triggers collision detection"}),"\n",(0,i.jsx)(e.li,{children:"Robot switches to low stiffness (compliant mode)"}),"\n",(0,i.jsx)(e.li,{children:"Position deviates significantly during collision (safe absorption)"}),"\n",(0,i.jsx)(e.li,{children:"Control force drops in compliant mode"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"What You Learned"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Collision detection via acceleration monitoring"}),"\n",(0,i.jsx)(e.li,{children:"Mode switching reduces impact forces (safety)"}),"\n",(0,i.jsx)(e.li,{children:'Compliant mode allows robot to "give" during collision'}),"\n",(0,i.jsx)(e.li,{children:"Trade-off: safety vs. task performance during collision"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"exercise-643-force-control-contact-task",children:"Exercise 6.4.3: Force Control (Contact Task)"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"\"\"\"Implement force control for maintaining contact force.\"\"\"\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom typing import Tuple\n\ndef pi_force_controller(\n    F_measured: float,\n    F_desired: float,\n    error_integral: float,\n    Kp: float = 0.01,\n    Ki: float = 0.005\n) -> Tuple[float, float]:\n    \"\"\"\n    PI controller for force tracking.\n\n    Args:\n        F_measured: Current measured force (N)\n        F_desired: Desired force (N)\n        error_integral: Accumulated error\n        Kp: Proportional gain\n        Ki: Integral gain\n\n    Returns:\n        velocity_command: Commanded velocity (m/s)\n        updated_integral: Updated error integral\n    \"\"\"\n    error = F_desired - F_measured\n    velocity_command = Kp * error + Ki * error_integral\n\n    return velocity_command, error_integral + error\n\ndef simulate_surface_contact(\n    desired_force: float = 10.0,\n    surface_stiffness: float = 1000.0,\n    duration: float = 5.0,\n    dt: float = 0.01\n) -> Tuple[np.ndarray, np.ndarray, np.ndarray]:\n    \"\"\"\n    Simulate force-controlled contact with surface.\n\n    Args:\n        desired_force: Target contact force (N)\n        surface_stiffness: Surface spring constant (N/m)\n        duration: Simulation time (s)\n        dt: Time step (s)\n\n    Returns:\n        times, positions, forces\n    \"\"\"\n    times = np.arange(0, duration, dt)\n    positions = np.zeros(len(times))\n    forces = np.zeros(len(times))\n\n    # Robot state\n    x = 0.0  # Position (0 = surface)\n    x_dot = 0.0\n    error_integral = 0.0\n\n    # Surface contact at x > 0 (compression)\n    surface_position = 0.0\n\n    for i, t in enumerate(times):\n        # Measure force (spring contact model)\n        if x > surface_position:\n            F_measured = surface_stiffness * (x - surface_position)\n        else:\n            F_measured = 0.0\n\n        # PI force control\n        x_dot_cmd, error_integral = pi_force_controller(\n            F_measured, desired_force, error_integral, Kp=0.02, Ki=0.01\n        )\n\n        # Simple velocity control (assume perfect tracking)\n        x_dot = x_dot_cmd\n\n        # Integrate\n        x = x + x_dot * dt\n\n        # Ensure no penetration below surface\n        x = max(x, surface_position)\n\n        positions[i] = x\n        forces[i] = F_measured\n\n    return times, positions, forces\n\n# Test different desired forces\ndesired_forces = [5, 10, 20]  # N\ncolors = ['blue', 'green', 'red']\nsurface_stiffness = 1000.0  # N/m\n\nfig, axes = plt.subplots(2, 1, figsize=(10, 8))\n\nfor F_d, color in zip(desired_forces, colors):\n    times, positions, forces = simulate_surface_contact(\n        desired_force=F_d,\n        surface_stiffness=surface_stiffness\n    )\n\n    # Position\n    axes[0].plot(times, positions * 1000, color=color, linewidth=2,\n                 label=f'F_desired = {F_d} N')\n\n    # Force\n    axes[1].plot(times, forces, color=color, linewidth=2,\n                 label=f'F_desired = {F_d} N')\n\n# Format\naxes[0].set_ylabel('Indentation (mm)')\naxes[0].set_title('Force Control: Surface Indentation')\naxes[0].legend()\naxes[0].grid(True, alpha=0.3)\n\nfor F_d, color in zip(desired_forces, colors):\n    axes[1].axhline(F_d, color=color, linestyle='--', alpha=0.5)\n\naxes[1].set_xlabel('Time (s)')\naxes[1].set_ylabel('Contact Force (N)')\naxes[1].set_title('Force Control: Force Tracking')\naxes[1].legend()\naxes[1].grid(True, alpha=0.3)\n\nplt.tight_layout()\nplt.show()\n\n# Analyze steady-state\nfor F_d in desired_forces:\n    times, positions, forces = simulate_surface_contact(F_d, surface_stiffness)\n    steady_force = np.mean(forces[-100:])  # Last 1 second\n    steady_position = np.mean(positions[-100:]) * 1000  # mm\n    error = abs(steady_force - F_d)\n\n    print(f\"Desired: {F_d} N \u2192 Achieved: {steady_force:.2f} N \" +\n          f\"(error: {error:.2f} N), Indent: {steady_position:.2f} mm\")\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Expected Output"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Force converges to desired value"}),"\n",(0,i.jsx)(e.li,{children:"Indentation depth = F_desired / K_surface"}),"\n",(0,i.jsx)(e.li,{children:"PI controller achieves zero steady-state error"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"What You Learned"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Force control regulates contact force via position adjustment"}),"\n",(0,i.jsx)(e.li,{children:"PI control eliminates steady-state force error"}),"\n",(0,i.jsx)(e.li,{children:"Indentation depth depends on surface stiffness"}),"\n",(0,i.jsx)(e.li,{children:"Applications: polishing, assembly, tactile exploration"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"exercise-644-variable-stiffness-control",children:"Exercise 6.4.4: Variable Stiffness Control"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"\"\"\"Implement variable stiffness based on task phase.\"\"\"\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom typing import Tuple\n\ndef variable_stiffness_profile(\n    time: float,\n    phases: list\n) -> Tuple[float, float]:\n    \"\"\"\n    Get desired stiffness and damping for current time.\n\n    Args:\n        time: Current time (s)\n        phases: List of (t_end, K, D) tuples\n\n    Returns:\n        K_d, D_d: Desired stiffness and damping\n    \"\"\"\n    for t_end, K, D in phases:\n        if time <= t_end:\n            return K, D\n    return phases[-1][1], phases[-1][2]  # Return last phase\n\ndef simulate_variable_stiffness(\n    trajectory: np.ndarray,\n    times: np.ndarray,\n    stiffness_profile: list\n) -> Tuple[np.ndarray, np.ndarray, np.ndarray]:\n    \"\"\"\n    Simulate impedance control with time-varying stiffness.\n\n    Args:\n        trajectory: Desired position trajectory (m)\n        times: Time array (s)\n        stiffness_profile: List of (t_end, K, D)\n\n    Returns:\n        positions, forces, stiffnesses\n    \"\"\"\n    dt = times[1] - times[0]\n    positions = np.zeros(len(times))\n    forces = np.zeros(len(times))\n    stiffnesses = np.zeros(len(times))\n\n    mass = 5.0\n    x, x_dot = 0.0, 0.0\n\n    for i, t in enumerate(times):\n        K_d, D_d = variable_stiffness_profile(t, stiffness_profile)\n        stiffnesses[i] = K_d\n\n        x_desired = trajectory[i]\n\n        # Impedance control\n        F_control = impedance_control_1d(x, x_dot, x_desired, 0.0, mass, D_d, K_d)\n\n        # Dynamics\n        x_ddot = F_control / mass\n        x_dot = x_dot + x_ddot * dt\n        x = x + x_dot * dt\n\n        positions[i] = x\n        forces[i] = F_control\n\n    return positions, forces, stiffnesses\n\n# Define task with three phases\nduration = 6.0\ndt = 0.01\ntimes = np.arange(0, duration, dt)\n\n# Trajectory: move to 1m, hold, return\ntrajectory = np.zeros(len(times))\nfor i, t in enumerate(times):\n    if t < 2.0:\n        trajectory[i] = 0.5 * t  # Move to 1m\n    elif t < 4.0:\n        trajectory[i] = 1.0  # Hold\n    else:\n        trajectory[i] = 1.0 - 0.5 * (t - 4.0)  # Return\n\n# Stiffness profile\n# Phase 1 (0-2s): Low stiffness (free motion)\n# Phase 2 (2-4s): High stiffness (precise hold, e.g., assembly)\n# Phase 3 (4-6s): Low stiffness (safe return)\nstiffness_profile = [\n    (2.0, 100.0, 2*np.sqrt(5.0*100.0)),\n    (4.0, 1000.0, 2*np.sqrt(5.0*1000.0)),\n    (6.0, 100.0, 2*np.sqrt(5.0*100.0))\n]\n\npositions, forces, stiffnesses = simulate_variable_stiffness(\n    trajectory, times, stiffness_profile\n)\n\n# Visualize\nfig, axes = plt.subplots(3, 1, figsize=(10, 10))\n\n# Trajectory\naxes[0].plot(times, trajectory, 'k--', linewidth=2, label='Desired', alpha=0.7)\naxes[0].plot(times, positions, 'b-', linewidth=2, label='Actual')\naxes[0].set_ylabel('Position (m)')\naxes[0].set_title('Variable Stiffness Control: Position')\naxes[0].legend()\naxes[0].grid(True, alpha=0.3)\n\n# Force\naxes[1].plot(times, forces, 'g-', linewidth=2)\naxes[1].set_ylabel('Control Force (N)')\naxes[1].set_title('Control Force')\naxes[1].grid(True, alpha=0.3)\n\n# Stiffness\naxes[2].plot(times, stiffnesses, 'r-', linewidth=3)\naxes[2].fill_between(times, 0, 1200, where=(stiffnesses == 100), alpha=0.2,\n                      color='blue', label='Low Stiffness (Compliant)')\naxes[2].fill_between(times, 0, 1200, where=(stiffnesses == 1000), alpha=0.2,\n                      color='red', label='High Stiffness (Precise)')\naxes[2].set_xlabel('Time (s)')\naxes[2].set_ylabel('Stiffness (N/m)')\naxes[2].set_title('Impedance Stiffness Profile')\naxes[2].legend()\naxes[2].grid(True, alpha=0.3)\n\nplt.tight_layout()\nplt.show()\n\n# Analyze tracking error by phase\nphases_times = [(0, 2), (2, 4), (4, 6)]\nphase_names = ['Approach', 'Hold', 'Return']\n\nfor (t_start, t_end), name in zip(phases_times, phase_names):\n    mask = (times >= t_start) & (times < t_end)\n    error_rms = np.sqrt(np.mean((positions[mask] - trajectory[mask])**2))\n    print(f\"{name} phase: RMS tracking error = {error_rms*1000:.2f} mm\")\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Expected Output"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Low stiffness during approach/return (smooth, safe motion)"}),"\n",(0,i.jsx)(e.li,{children:"High stiffness during hold (accurate positioning)"}),"\n",(0,i.jsx)(e.li,{children:"Tracking error lowest during high-stiffness phase"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"What You Learned"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Stiffness can be varied based on task requirements"}),"\n",(0,i.jsx)(e.li,{children:"High stiffness for precision tasks (assembly, holding)"}),"\n",(0,i.jsx)(e.li,{children:"Low stiffness for safety during motion and human proximity"}),"\n",(0,i.jsx)(e.li,{children:"Variable impedance enables adaptive robot behavior"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"trywithai-exercises",children:"TryWithAI Exercises"}),"\n",(0,i.jsx)(e.h3,{id:"trywithai-641-adaptive-impedance-from-force-feedback",children:"TryWithAI 6.4.1: Adaptive Impedance from Force Feedback"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Prompt"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"Design an adaptive impedance controller that automatically adjusts stiffness based on measured interaction forces. The system should:\n\n1. Monitor contact force magnitude and rate of change\n2. Decrease stiffness when high forces or rapid force changes detected (safety)\n3. Increase stiffness when in free motion for better tracking\n4. Use an exponential filter to smooth stiffness transitions\n\nTest scenarios: sudden obstacle contact, human hand-guiding, and collaborative pushing. Show how stiffness adapts in real-time and compare safety (peak forces) vs. fixed high/low stiffness.\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Expected Skills"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Real-time parameter adaptation"}),"\n",(0,i.jsx)(e.li,{children:"Force-based state estimation (contact vs. free motion)"}),"\n",(0,i.jsx)(e.li,{children:"Exponential smoothing filters"}),"\n",(0,i.jsx)(e.li,{children:"Safety metric analysis (peak force, acceleration)"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"trywithai-642-hybrid-position-force-control-for-assembly",children:"TryWithAI 6.4.2: Hybrid Position-Force Control for Assembly"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Prompt"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"Implement hybrid position/force control for a peg-in-hole insertion task. The controller should:\n\n1. Control X-Y position (align peg with hole opening)\n2. Control Z force (constant insertion force, e.g., 5N)\n3. Detect successful insertion (force drops when peg enters hole)\n4. Visualize peg position, hole location, contact forces, and success detection\n\nModel the hole as a region where the peg can slide freely (low friction) once aligned. Test with different hole tolerances (tight: \xb10.5mm, loose: \xb12mm). Show how force control compensates for position uncertainty.\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Expected Skills"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Task-space decomposition (position vs. force directions)"}),"\n",(0,i.jsx)(e.li,{children:"Contact state detection"}),"\n",(0,i.jsx)(e.li,{children:"Geometry-based constraint modeling"}),"\n",(0,i.jsx)(e.li,{children:"Success/failure analysis"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(e.p,{children:"This lesson introduced compliant control for safe human-robot interaction:"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Key Concepts"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Impedance control regulates position-force relationship"}),"\n",(0,i.jsx)(e.li,{children:"Virtual stiffness/damping enable tunable compliance"}),"\n",(0,i.jsx)(e.li,{children:"Collision detection triggers safe response modes"}),"\n",(0,i.jsx)(e.li,{children:"Force control maintains desired contact forces"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Practical Skills"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Implementing 1D impedance control"}),"\n",(0,i.jsx)(e.li,{children:"Collision detection and response"}),"\n",(0,i.jsx)(e.li,{children:"PI force control for contact tasks"}),"\n",(0,i.jsx)(e.li,{children:"Variable stiffness control for multi-phase tasks"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Next Steps"}),": ",(0,i.jsx)(e.a,{href:"/physical-ai-book/ur/docs/chapter-06/lesson-05",children:"Lesson 6.5"})," covers human-robot interaction including gesture recognition and social cues."]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Further Reading"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:['Hogan, N. (1985). "Impedance Control: An Approach to Manipulation." ',(0,i.jsx)(e.em,{children:"Journal of Dynamic Systems, Measurement, and Control"}),"."]}),"\n",(0,i.jsxs)(e.li,{children:['Albu-Sch\xe4ffer, A., et al. (2007). "Cartesian Impedance Control of Redundant and Flexible-Joint Robots." ',(0,i.jsx)(e.em,{children:"Springer Tracts in Advanced Robotics"}),"."]}),"\n"]})]})}function d(s={}){const{wrapper:e}={...(0,l.R)(),...s.components};return e?(0,i.jsx)(e,{...s,children:(0,i.jsx)(o,{...s})}):o(s)}},8453:(s,e,n)=>{n.d(e,{R:()=>t,x:()=>r});var a=n(6540);const i={},l=a.createContext(i);function t(s){const e=a.useContext(l);return a.useMemo(function(){return"function"==typeof s?s(e):{...e,...s}},[e,s])}function r(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(i):s.components||i:t(s.components),a.createElement(l.Provider,{value:e},s.children)}}}]);